title: Linux基础学习（八）软件安装
id: 1495274545024
author: 不识
tags:
  - Linux
categories:
  - Linux基础
  - ''
date: 2017-05-20 18:02:00
---
# 软件包
- 源码包
- 二进制包（RPM包，系统默认包）

# rpm命令

## RPM命名规则

httpd-2.2.15-15.el6.centos.1.i686.rpm
- httpd软件包名
- 2.2.15软件版本
- 15软件发布次数
- el6.centos适合的Linux平台
- I686适合的硬件平台
- rpm包拓展名

## RPM包依赖性

1. 树形依赖：a→b→c
2. 环形依赖：a→b→c→a
3. 模块依赖：模块依赖，查询网站：www.rpmfind.net

## 安装命令

- 包全名：操作的包是没有安装的软件包时，使用包全名。而且要注意路径
- 包名：操作已经安装的软件包时，使用包名，是搜索/var/lib/rpm/中的数据库

### rpm -ivh 包全名
安装软件包

|选项|意义|
|----|----|
|**-i（install）**|安装|
|**-v（verbos）**|显示详细信息|
|**-h(（Hash）**|显示进度|
|**--nodeps**|不检查依赖性|

### rpm -Uvh 包全名
升级RPM包
该命令如果此包之前没有安装，则直接安装，如果已经安装则是升级。

|选项|意义|
|----|----|
|**-U（update）**|升级|


### rpm -e 包名
卸载RPM包

|选项|意义|
|----|----|
|**-e（erase）**|卸载|
|**--nodeps**|不检查依赖性|

## RPM包查询
### rpm -q 包名
查询包是否安装
### rpm -qa
查询所有已经安装的RPM包
### rpm -qi 包名
查询软件包详细信息

|选项|意义|
|----|----|
|**-i**|包的详细信息|
|**-p**|查询未安装包信息|

### rpm -ql 包名
查询包中文件安装的位置

|选项|意义|
|----|----|
|**-l**|列表|
|**-p**|查询未安装包信息|
### rpm -qf 系统文件名
查询系统文件属于那个npm包中

|选项|意义|
|----|----|
|**-f**|查询系统文件属于那个npm包中|

### rpm -qR 系统文件名
查询依赖npm包中

查询出无意义的依赖太多，基本没有太大用处

## RPM包校验

### rpm -V 包名
校验安装的RPM包是否被修改

|选项|意义|
|----|----|
|**-V**|校验指定RPM包中的文件|

### rpm2cpio 包全名 | cpio -idv.文件绝对路径

|选项|意义|
|----|----|
|**-rpm2cpio**|将rpm包转换为cpio格式命令|
|**cpio**|是一个标准工具，用于创建软件档案文件和从档案文件中提取文件|


# RPM包默认安装位置

|路径|作用|
|----|----|
|/etc/|配置文件安装目录|
|/usr/bin/|可执行的命令安装目录|
|/usr/lib|程序所使用的函数库保存位置|
|/usr/share/doc/|基本的软件使用手册保存位置|
|/usr/share/man|帮助文件保存位置|

# yum在线安装
rpm包依赖性太强，如果使用手动安装的话，则非常繁琐。所以提供了yum在线安装，将所有的软件包放在官方服务器上，可以自动解决依赖性问题。
>redhat的yum安装是付费功能

## yum源文件
在目录/etc/yum.repos.d下有四个yum配置源文件，其中只有一个是默认生效的，里面配置着yum安装的一些信息

|属性|意义|
|----|----|
|**[base]**|容器名称，一定要放在[]中|
|**name**|容器说明，可以自己随便写|
|**mirrorlist**|镜像站点，这个可以自己注释掉|
|**baseurl**|我们的yum源服务器的地址|
|**enabled**|此容器是否生效，不写或者1都是生效，0为不生效|
|**gpgcheck**|RPM数字证书是否生效，1为生效，0为不生效|
|**gpgkey**|数字证书的公钥文件保存位置，不用修改|

## 光盘yum源搭建

1. 将原来在线yum配置文件重命名，使其失效
2. 配置光盘yum配置文件，修改光盘挂载点，将多余的注释掉，设置enabled=1
3. yum list 查看是否可用

## yum命令

### yum list 
查询所有可用软件包列表

### yum search 关键字
搜索服务器上和关键字相关的包

### yum -y install 包名
在线安装rpm包

|属性|意义|
|----|----|
|**install**|安装|
|**-y**|自动回答yes|

### yum -y update 包名
在线升级rpm包，不加包名会升级所有包，包括linux内核

|属性|意义|
|----|----|
|**update**|安装|
|**-y**|自动回答yes|

### yum -y remove 包名
卸载包,yum卸载没有提示，非常容易造成系统崩溃，服务器使用最小化安装，用什么装什么


