title: java 异常（一）概述
id: 1495893482328
author: 不识
date: 2017-05-27 21:58:04
tags:
---
# 异常
当一个方法发生错误时，该方法将创建一个对象，并且将其移交给运行系统。该对象就被称为异常（exception）对象，它包含有关错误的相关信息，比如错误类型以及错误发生时程序的状态。而这个异常对象的创建和移交就被称为抛出异常。

在方法抛出异常后，运行时期系统将会尝试寻找处理它的方法。处理异常的方式是获取调用发生错误的方法的有序方法列表，这个方法列表被称为调用栈（call stack）。
![call stack](/images/java base/call stack.gif)

<!-- more -->
运行时系统在调用栈中搜索一个包含可以处理异常的代码块的方法。这个代码块被称为异常处理程序（exception handler）。这个搜索从最初发生错误的方法开始，然后以方法被调用相反的顺序搜索调用栈。当找到适当的处理程序时，运行时期系统将异常传递给处理程序。如果抛出的异常对象的类型与处理程序可以处理的类型匹配，则异常处理程序被认为是适当的。

所选择的异常处理程序被称为捕获（catch）异常。如果运行时系统彻底搜索调用堆栈上的所有方法，而不会找到适当的异常处理程序，如下图所示，运行时系统（以及因此程序）终止。
![catch exception](/images/java base/catch exception.gif)
# 异常处理方式
有效的Java编程语言代码必须符合Catch或指定要求。这意味着可能会抛出某些异常的代码必须由以下任一方括起：
- 捕获异常的try语句。try语句必须为捕获的异常提供一个异常处理。
- 一种指定它可以抛出异常的方法。该方法必须提供一个列出异常列表的throws语句。

并不是所有的异常都需要Catch或指定要求的限制。有三种基本异常类别， 只有其中一种需要以上处理。
 
# 异常分类

第一种异常是编译时期异常（checked exception）。一个编写良好的程序应当能预期并捕获这些异常，并且提醒用户可能出现的错误。

编译时期异常是唯一需要进行Catch或指定处理的异常。所有异常都是编译时期，除了由Error，RuntimeException及其子类指示的异常。

第二种异常是错误异常（Error）,它们产生异常条件来自程序外部，并且通常不能预期和恢复。应用程序可以选择来捕获这个异常，以通知用户该问题，但是打印栈跟踪并退出程序也可能是有意义的。

错误异常不受Catch或指定要求的约束。错误异常是由Error及其子类指定的异常。

第三种异常是运行时期异常（RuntimeException ）。它们产生异常条件是由程序内部造成的，并且应用程序通常不能预期和恢复。比如最常见的空指针异常（NullPointException）就是一个运行时期异常。这些异常通常表示程序编写错误，例如逻辑错误或API的不当使用。尽管Java能够捕获这些异常，但是消除导致异常的bug才是更有意义的。

运行时期异常也不受制于Catch或指定处理。运行时期异常是由RuntimeException及其子类指示的。

错误和运行时异常被统称为非检查型异常（unchecked exception）。